version: "3"
services:
  usage_exporter:
    image: tluettje/openstack-tenant-usage-exporter:v2
    env_file:
      - admin-openrc
    networks:
      - internal
    expose:
      - "8080"
  # local prometheus instance responsible for monitoring
  local_prometheus:
    build: ./local_prometheus
    networks:
      - internal
    ports:
      - "9090:9090"
  # global prometheus instance scraping data from the local instance
  global_prometheus:
    build: ./global_prometheus
    networks:
      - internal
    ports:
      - "9090:80"



networks:
  internal:
